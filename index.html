<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Demande de consultation cardiologique</title>

<style>
body{font-family:Arial;background:#f4f6f8;margin:0;padding:20px;}
.container{max-width:720px;margin:auto;background:white;padding:20px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
h2{background:#1f6fb2;color:white;padding:10px;border-radius:6px;}
.row{display:flex;align-items:center;justify-content:space-between;margin:8px 0;}
.row label{flex:1;}
.choices{display:flex;gap:20px;}
input,select,textarea{width:100%;padding:10px;margin-top:5px;border-radius:6px;border:1px solid #ccc;}
button{margin-top:20px;background:#1f6fb2;color:white;border:none;padding:14px;font-size:16px;border-radius:8px;cursor:pointer;}
button:hover{background:#165b93;}
.small{font-size:13px;color:#555;}
</style>
</head>

<body>
<div class="container">

<h1>Demande de consultation cardiologique</h1>

<form id="form">

<!-- ADMIN -->
<h2>Données administratives</h2>

<label>Date de naissance</label>
<input type="date" name="dob" required>

<label>Sexe</label>
<select name="sexe" required>
<option value="">Choisir</option>
<option>Homme</option>
<option>Femme</option>
</select>

<label>Téléphone</label>
<input type="tel" name="tel">

<label>Email</label>
<input type="email" name="mail">

<p class="small">Aucune donnée nominative demandée.</p>

<!-- MOTIF -->
<h2>Motif de consultation</h2>

<label><input type="radio" name="motif" value="Prévention" required> A — CONSULTATION DE PREVENTION</label>
<label><input type="radio" name="motif" value="Demande médecin"> B — CONSULTATION A LA DEMANDE D'UN AUTRE MEDECIN</label>
<label><input type="radio" name="motif" value="Suivi"> C — CONSULTATION DE SUIVI</label>
<label><input type="radio" name="motif" value="Symptômes nouveaux"> D — CONSULTATION POUR SYMPTOMES CARDIAQUES NOUVEAUX</label>

<!-- FRCV -->
<h2>Mes facteurs de risque cardiovasculaire</h2>

<div class="row">
<label>Tabac actuel ou arrêt &lt; 15 ans</label>
<div class="choices">
<label><input type="radio" name="tabac" value="oui" required> Oui</label>
<label><input type="radio" name="tabac" value="non"> Non</label>
</div>
</div>

<div class="row">
<label>HTA ou traitement antihypertenseur</label>
<div class="choices">
<label><input type="radio" name="hta" value="oui" required> Oui</label>
<label><input type="radio" name="hta" value="non"> Non</label>
</div>
</div>

<div class="row">
<label>Diabète ou traitement antidiabétique</label>
<div class="choices">
<label><input type="radio" name="diabete" value="oui" required> Oui</label>
<label><input type="radio" name="diabete" value="non"> Non</label>
</div>
</div>

<div class="row">
<label>Cholestérol ou traitement hypolipémiant</label>
<div class="choices">
<label><input type="radio" name="chol" value="oui" required> Oui</label>
<label><input type="radio" name="chol" value="non"> Non</label>
</div>
</div>

<!-- ATCD -->
<h2>Mes antécédents cardiovasculaires</h2>

<div class="row">
<label>Arythmie (FA…)</label>
<div class="choices">
<label><input type="radio" name="arythmie" value="oui" required> Oui</label>
<label><input type="radio" name="arythmie" value="non"> Non</label>
</div>
</div>

<div class="row">
<label>Infarctus / Stent / Pontage</label>
<div class="choices">
<label><input type="radio" name="infarctus" value="oui" required> Oui</label>
<label><input type="radio" name="infarctus" value="non"> Non</label>
</div>
</div>

<div class="row">
<label>Insuffisance cardiaque</label>
<div class="choices">
<label><input type="radio" name="ic" value="oui" required> Oui</label>
<label><input type="radio" name="ic" value="non"> Non</label>
</div>
</div>

<div class="row">
<label>Problème de valve</label>
<div class="choices">
<label><input type="radio" name="valve" value="oui" required> Oui</label>
<label><input type="radio" name="valve" value="non"> Non</label>
</div>
</div>

<div class="row">
<label>Aorte dilatée non opérée</label>
<div class="choices">
<label><input type="radio" name="aorte" value="oui" required> Oui</label>
<label><input type="radio" name="aorte" value="non"> Non</label>
</div>
</div>

<div class="row">
<label>Chirurgie cardiaque ancienne</label>
<div class="choices">
<label><input type="radio" name="chirurgie" value="oui" required> Oui</label>
<label><input type="radio" name="chirurgie" value="non"> Non</label>
</div>
</div>

<div class="row">
<label>Maladie thrombo-embolique</label>
<div class="choices">
<label><input type="radio" name="mtev" value="oui" required> Oui</label>
<label><input type="radio" name="mtev" value="non"> Non</label>
</div>
</div>

<!-- TRAITEMENT -->
<h2>Mon traitement</h2>
<textarea name="traitement" rows="4" placeholder="Listez vos médicaments..."></textarea>

<button type="submit">Envoyer une demande de consultation</button>

</form>

<div id="msg"></div>

</div>

<script>
const API="https://cardioapp-oen0.onrender.com";

document.getElementById("form").addEventListener("submit", async e=>{
e.preventDefault();

const f=e.target;

const data={
administratif:{dob:f.dob.value,sexe:f.sexe.value,tel:f.tel.value,mail:f.mail.value},
motif_consultation:{motif:f.motif.value},
facteurs_risque:{
tabac:f.tabac.value,
hta:f.hta.value,
diabete:f.diabete.value,
cholesterol:f.chol.value
},
antecedents_cardio:{
arythmie:f.arythmie.value,
infarctus:f.infarctus.value,
insuffisance_cardiaque:f.ic.value,
valve:f.valve.value,
aorte:f.aorte.value,
chirurgie:f.chirurgie.value,
mtev:f.mtev.value
},
traitement_ocr:f.traitement.value,
consentement:{ok:true}
};

const r=await fetch(API+"/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)});
document.getElementById("msg").innerHTML=r.ok?"<b>Demande envoyée ✔️</b>":"Erreur ❌";
});
</script>

</body>
</html>