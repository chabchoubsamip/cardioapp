<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fiche</title>
</head>

<body>

<h2>Fiche patient</h2>

<form id="f">

Nom <input name="nom" required><br><br>
Prenom <input name="prenom" required><br><br>

Tabac
<select name="tabac">
<option>oui</option>
<option>non</option>
</select><br><br>

<button type="submit">Envoyer</button>

</form>

<script>
document.getElementById("f").addEventListener("submit", async function(e){
    e.preventDefault();

    const f = e.target;

    const data = {
        administratif:{
            nom:f.nom.value,
            prenom:f.prenom.value
        },
        motif_consultation:{motif:""},
        facteurs_risque:{
            tabac:f.tabac.value
        },
        antecedents_cardio:{},
        traitement_ocr:"",
        consentement:{ok:true}
    };

    await fetch("/submit",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify(data)
    });

    alert("Fiche enregistr√©e");
});
</script>

</body>
</html>